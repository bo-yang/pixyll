---
layout: post
title: 线性坐标系到对数坐标系的变换——EMC测试曲线的绘制
categories:
- C
- MFC
- EMC
tags:
- C/C++
- EMC
status: publish
type: post
published: true
meta:
  views: '1147'
  original_post_id: '41'
  _wp_old_slug: '41'
author: 
---

<p>        <span style="font-size:10.5pt;font-family:宋体;"><br />&nbsp;&nbsp;&nbsp; 绘制测试曲线的核心函数为</span><span lang="EN-US" style='font-size:10.5pt;font-family:"Calibri", "sans-serif";'>CEMCView::DrawFrameCurve()</span><span style="font-size:10.5pt;font-family:宋体;">函数。该函数可以根据测试的频段和该频段的测试数据在对数坐标系的对应位置绘制测试曲线。</span><span lang="EN-US" style='font-size:10.5pt;font-family:"Calibri", "sans-serif";'>DrawFrameCurve()</span><span style="font-size:10.5pt;font-family:宋体;">函数绘制曲线的流程图如图</span><span lang="EN-US" style='font-size:10.5pt;font-family:"Calibri", "sans-serif";'>1</span><span style="font-size:10.5pt;font-family:宋体;">所示：</p>
<p></span></p>
<div style="text-align:center;"><span style="font-size:10.5pt;font-family:宋体;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/测试流程图.JPG" /><br />图1 测试流程图</p>
<p></span><span style="font-size:10.5pt;font-family:宋体;"></span></div>
<div style="text-align:center;"><span style="font-size:10.5pt;font-family:宋体;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/R3131A.JPG" /></span><br /><span style="font-size:10.5pt;font-family:宋体;"></span></div>
<p><span style="font-size:10.5pt;font-family:宋体;">&nbsp;<br /></span></p>
<p class="MsoNormal" style="text-align:center;"><span style="font-family:宋体;">&nbsp;&nbsp;&nbsp; 图2 R3131A屏幕显示的线性坐标系</span></p>
<p class="MsoNormal" style="text-align:center;"><span style="font-family:宋体;"><br /></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;">&nbsp;&nbsp;&nbsp; 每次测试，</span><span lang="EN-US">Advantest R3131A</span><span style="font-family:宋体;">频谱仪都会对所测频段采样</span><span lang="EN-US">501</span><span style="font-family:宋体;">个点，每个点对应的测试值不小于</span><span lang="EN-US">512</span><span style="font-family:宋体;">，如图</span><span lang="EN-US">3-29</span><span style="font-family:宋体;">所示。大于</span><span lang="EN-US">3392</span><span style="font-family:宋体;">的数值不在频谱仪屏幕上显示，但会记录下这个值，因为这个值也是有效的。</span><span lang="EN-US">Advantest R3131A</span><span style="font-family:宋体;">频谱仪默认纵轴每格代表</span><span lang="EN-US">10dB</span><span style="font-family:宋体;">，因此频谱仪的测试值</span><span lang="EN-US">3392-512=2880</span><span style="font-family:宋体;">对应着</span><span lang="EN-US">80dB</span><span style="font-family:宋体;">。对于在计算机上绘制的对数坐标系而言，若纵轴表示</span><span lang="EN-US">0</span><span style="font-family:宋体;">～</span><span lang="EN-US">M dB</span><span style="font-family:宋体;">，因此对数坐标系纵坐标最大值对应的频谱仪测试值为：</span><span lang="EN-US"></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/dtop.JPG" /><br /><span style="position:relative;top:12pt;"><!--[if !vml]--></span></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:12pt;"><!--[endif]--></span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;">设<span style="font-style:italic;">Y</span><sub>top</sub></span><span lang="EN-US" style="font-style:italic;"><span style="position:relative;top:7pt;"><!--[if !vml]--><!--[endif]--></span></span><span style="font-family:宋体;">为对数坐标系左上角对应的计算机屏幕上的纵坐标值，</span><span lang="EN-US"><span style="position:relative;top:6pt;"></span></span><span style="font-family:宋体;"><span style="font-style:italic;">Y</span><sub>bot</sub>表示对数坐标系左下角对应的计算机屏幕上的纵坐标值，<span style="font-style:italic;">y</span></span><span lang="EN-US"><span style="position:relative;top:5pt;"><!--[endif]--></span></span><span style="font-family:宋体;">表示对数坐标系中某个测试点对应的计算机屏幕上的纵坐标值，<span style="font-style:italic;">d</span></span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[endif]--></span></span><span style="font-family:宋体;">表示该测试点对应的频谱仪测试值，对数坐标系纵坐标从</span><span lang="EN-US">0</span><span style="font-family:宋体;">开始，则：</span><span lang="EN-US"></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:16pt;"><!--[if !vml]--><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/dtop2.JPG" /><!--[endif]--></span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;"><br /></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;">因此，</span><span lang="EN-US"></span></p>
<p class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:16pt;"><!--[if !vml]--></span><span><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/y.JPG" /><br /></span></span></p>
<p align="right" class="MsoNormal" style="text-align:right;"><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:red;">(3-1)</span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;text-indent:21pt;"><span style="font-family:宋体;">对于横坐标，如果已知测试的起始频率为</span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">f<sub>start</sub>，起始频率对应的计算机横坐标为</span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[if !vml]--></span><span>x<sub>start</sub></span></span><span style="font-family:宋体;">，测试终止频率为</span><span lang="EN-US"><span style="position:relative;top:7pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">f<sub>stop</sub>，测试终止频率对应的计算机横坐标为</span><span lang="EN-US"><span style="position:relative;top:7pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">x<sub>stop</sub>，该频段的起始频率为</span><span lang="EN-US"><span style="position:relative;top:7pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">f<sub>frmstart</sub>，结合图</span><span lang="EN-US">3-16</span><span style="font-family:宋体;">可得该频段起始频率对应的计算机坐标</span><span lang="EN-US"><span style="position:relative;top:7pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">有：</span></p>
<p class="MsoNormal" style="text-align:center;text-indent:21pt;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/x.JPG" /><span style="font-family:宋体;"></span></p>
<p class="MsoNormal" style="text-align:center;text-indent:21pt;"><span style="font-family:宋体;"><br /></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:16pt;"><!--[if !vml]--><!--[endif]--></span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;">因此</span></p>
<p class="MsoNormal" style="text-align:center;"><span style="font-family:宋体;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/xfrmstart.JPG" /></span></p>
<p align="left" class="MsoNormal" style="text-align:left;">&nbsp;</p>
<p align="left" class="MsoNormal" style="text-align:left;">&nbsp;</p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;"></span><span lang="EN-US"></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:35pt;"><!--[if !vml]--><!--[endif]--></span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;">如果每个测试频段有</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">N个采样点，也即有</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">N个测试数据，那么该频段中第</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">i个数据对应的频率为</span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[if !vml]--><!--[endif]--></span></span><span style="font-family:宋体;">f<sub>i</sub>，且</span><span lang="EN-US"></span></p>
<p align="center" class="MsoNormal" style="text-align:center;"><span lang="EN-US"><span style="position:relative;top:12pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/fi.JPG" /></span><span lang="EN-US"><span style="position:relative;top:5pt;"><!--[endif]--></span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;">式中，</span><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-US"><span style="position:relative;top:7pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">f<sub>frmstop</sub>&mdash;&mdash;测试频段的终止频率。</span><span lang="EN-US"></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span style="font-family:宋体;">第</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">i个数据对应的计算机横坐标为：</span></p>
<p class="MsoNormal" style="text-align:center;"><img alt="" src="http://p.blog.csdn.net/images/p_blog_csdn_net/bonny95/xi.JPG" /></p>
<p class="MsoNormal" style="text-align:center;"><span style="font-family:宋体;"></span><span lang="EN-US"></span></p>
<p align="right" class="MsoNormal" style="text-align:right;"><span lang="EN-US"><span style="position:relative;top:35pt;"><!--[if !vml]--></span></span><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:red;">(3-2)</span></span></p>
<p align="left" class="MsoNormal" style="text-align:left;"><span lang="EN-US"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-family:宋体;">如果在某个测试频段内的第</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">i个数据的测试值为</span><span lang="EN-US"><span style="position:relative;top:3pt;"><!--[if !vml]--><!--[endif]--></span></span><span style="font-family:宋体;">d，则该点对应的计算机屏幕坐标为(x<sub>i</sub>,y<sub>i</sub>)</span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[if !vml]--><!--[endif]--></span></span><span style="font-family:宋体;">，</span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[if !vml]--></span></span><span style="font-family:宋体;">x<sub>i</sub>、y<sub>i</sub></span><span lang="EN-US"><span style="position:relative;top:6pt;"><!--[endif]--></span></span><span style="font-family:宋体;">可分别根据式</span><span lang="EN-US" style="color:red;">(3-1)</span><span style="font-family:宋体;">和式</span><span lang="EN-US" style="color:red;">(3-2)</span><span style="font-family:宋体;">求出。</span></p>
<p align="left" class="MsoNormal" style="text-align:left;">&nbsp;</p>
<p align="left" class="MsoNormal" style="text-align:left;">PS:</p>
<p align="left" class="MsoNormal" style="text-align:left;">&nbsp;&nbsp;&nbsp; <font size="4"><span style="color:rgb(255,0,0);">CSDN不支持把Word中的公式自动保存为图片实在是太难用了，每次都要自己先把公式转化为图片然后再插入到文章里，麻烦！</span></font><span style="font-family:宋体;"></span><span lang="EN-US"></span></p>
