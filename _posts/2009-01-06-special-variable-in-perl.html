---
layout: post
title: Perl中的特殊变量
categories:
- Perl
- Unix/Linux
tags:
- Perl
- Unix/Linux
status: publish
type: post
published: true
meta:
  views: '195'
  original_post_id: '14'
  _wp_old_slug: '14'
author: 
---
<p>
<span class="Apple-style-span" style="color:rgb(0,0,0);font-size:16px;">
<div style="min-height:1100px;counter-reset:__goog_page__ 0;font-family:Verdana;font-size:10pt;line-height:normal;background-color:rgb(255,255,255);margin:6px;padding:0;">
<h1 style="text-align:center;font-size:18pt;">Perl中的特殊变量<br /></h1>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;">1. $&amp;, $`,$' 用在模式匹配中<br /></h3>
<p><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><b><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><span class="Apple-style-span" style="color:rgb(0,0,255);">$&amp;  用来存放匹配中的值<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$`   用来存放匹配中之前所有字符<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$</span></b></span><span><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">'</span></span></span><span style="color:rgb(0,0,0);"><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">   用来存放匹配中之后所有字符</span></span><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />如：<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,128,0);">#</span><span style="color:rgb(0,128,0);">!/usr/bin/perl -w</span><span style="color:rgb(0,128,0);"><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>Hello good  there,neigbor hello</b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">=~</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">/</span><span style="color:rgb(0,0,0);">S(</span><span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,0);">w</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">)</span><span style="color:rgb(0,0,0);">,/</span><span style="color:rgb(0,0,0);">)<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />{<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>That actually matched '$&amp;'. </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $`</span><span style="color:rgb(0,0,0);">.</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b> </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $</span><span style="color:rgb(0,0,0);"><b>'</b></span><span style="color:rgb(0,0,0);"><b>." ";<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />}<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><span class="Apple-style-span" style="font-weight:normal;">执行的结果为：<br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span class="Apple-style-span" style="font-weight:normal;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />That actually matched </span></b></span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">there</span><span style="color:rgb(0,0,0);">,</span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">.<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />Hello good  <br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />neigbor hello<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br />－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<span style="font-family:Verdana;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><span style="font-family:verdana;"><font size="2">－－－－－－－－</font></span></span></span></span></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />另外常用的变量@_<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />@_是子程序的一个私有变量◆；如果有一个全局变量@_，它将在此子程序调用前存储起来，当子程序调用完成后，其早期的值会被重新赋还给@_◆。这意味着当将参数传递给子程序时不用担心它会影响此程序中其它子程序的@_这个变量的值。嵌套的子程序调用时，@_的值和上述类似。甚至此子程序递归调用时，每一次调用将得到新的@_，因此子程序调用时将得到其自身的参数列表。<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />◆除非调用的子程序前有&amp;而后面没有括号（或者没有参数），此时@_从此调用者的上下文(context)得到。这通常不是个好主意，但有时很<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />有用。</span></span></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h3 style="font-size:12pt;">2. Perl - $_ and @_<br /></h3>
<p><span style="font-family:Arial;">
<div class="generaltext" style="font-family:Arial, Helvetica, sans-serif;font-style:normal;font-weight:normal;font-variant:normal;color:rgb(0,0,0);background-color:rgb(255,255,255);letter-spacing:normal;text-align:left;vertical-align:top;text-decoration:none;border-bottom-width:0;margin-top:0;margin-bottom:0;"><font size="2">Perl's a great language for special variables - variables that are set up without the programmer having to intervene and providing information ranging from the number of lines read from the <b>current input file ($.)</b> through the <b>current process ID ($$) </b>and the <b>operating system ($^O)</b>. Other special variables effect how certain operations are performed (<b>$| controlling output buffering / flushing</b>, for example), or are fundamental in the operation of certain facilities - no more so than $_ and @_.</p>
<p>Lets clear a misconception. </font><b>$_</b><font size="2"> and </font><b>@_</b><font size="2"> are </font><i>different variables</i><font size="2">. In Perl, you can have a list and a scalar of the same name, and they refer to unrelated pieces of memory.</p>
<p></font><font color="brown"><b>$_ is known as the "default input and pattern matching space"</b>.</font><font size="2"> In other words, if you read in from a file handle at the top of a </font><b>while</b><font size="2"> loop, or run a </font><b>foreach</b><font size="2"> loop and don't name a loop variable, $_ is set up for you. Then any regular expression matches, </font><b>chop</b><font size="2">s (and </font><b>lc</b><font size="2">s and many more) without a parameter, and even </font><b>print</b><font size="2">s assume you want to work on $_. Thus:<br /></font><code>while ($line = &lt;FH&gt;) {<br />  if ($line =~ /Perl/) {<br />    print FHO $line;<br />    }<br />  print uc $line;<br />  }</code></p>
<p><font size="2">Shortens to:<br /></font><code>while (&lt;FH&gt;) {<br />  /Perl/ and<br />    print FHO ;<br />  print uc;<br />  }</code></p>
<p><font color="brown"><b>@_ is the list of incoming parameters to a sub.</b></font><font size="2"> So if you write a sub, you refer to the first parameter in it as </font><b>$_[0]</b><font size="2">, the second parameter as </font><b>$_[1]</b><font size="2"> and so on. And you can refer to</font><b>$_#</b><font size="2"> as the index number of the last parameter:<br /></font><code>sub demo {<br />  print "Called with ",$#_+1," params/n";<br />  print "First param was $_[0]/n";</code></p>
<p><font size="2">Note that the </font><b>English</b><font size="2"> module adds in the ability to refer to the special variables by other longer, but easier to remember, names such as @ARG for @_ and $PID for $$. But </font><code>use English;</code><font size="2"> can have a detrimental performance effect if you're matching regular expressions against long incoming strings. </font></div>
<div style="text-align:left;"></div>
<p></span></div>
<p></span></p>
